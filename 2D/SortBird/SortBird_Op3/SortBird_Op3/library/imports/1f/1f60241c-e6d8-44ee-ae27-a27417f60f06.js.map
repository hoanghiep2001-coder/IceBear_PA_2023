{"version":3,"sources":["assets\\GamePlay.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsC,4BAAY;IAAlD;QAAA,qEAqGC;QApGC,OAAO;QAEP,UAAI,GAAY,IAAI,CAAC;QAErB,qBAAe,GAAY,IAAI,CAAC;QAEhC,QAAQ;QAER,iBAAW,GAAc,EAAE,CAAC;QAE5B,cAAQ,GAAc,EAAE,CAAC;QAEzB,gBAAU,GAAc,EAAE,CAAC;QAE3B,QAAQ;QACR,cAAQ,GAAY,KAAK,CAAC;QAC1B,cAAQ,GAAY,KAAK,CAAC;QAC1B,kBAAY,GAAY,KAAK,CAAC;QAC9B,qBAAe,GAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzC,sBAAgB,GAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpC,uBAAiB,GAAc,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;;IAgF5D,CAAC;IA9EC,SAAS;IACC,yBAAM,GAAhB;QAAA,iBAQC;QAPC,gCAAgC;QAChC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC9D,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE9B,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,EAAE,GAAG,CAAC,CAAA;IACT,CAAC;IAEO,yCAAsB,GAA9B;QAAA,iBAyBC;QAvBC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,IAAI;YACxB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YAE5D,KAAI,CAAC,YAAY,CAAC;gBAChB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;YACrE,CAAC,EAAE,GAAG,CAAC,CAAC;YAER,KAAI,CAAC,YAAY,CAAC;gBAChB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;YAC/D,CAAC,EAAE,GAAG,CAAC,CAAA;QACT,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAA,IAAI;YAC3B,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YAE5D,KAAI,CAAC,YAAY,CAAC;gBAChB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;YACrE,CAAC,EAAE,GAAG,CAAC,CAAC;YAER,KAAI,CAAC,YAAY,CAAC;gBAChB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;YAC/D,CAAC,EAAE,GAAG,CAAC,CAAA;QACT,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,gCAAa,GAArB;QAAA,iBAuCC;QAtCC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE;YAC9B,KAAI,CAAC,YAAY,CAAC,CAAC,CAAC,KAAI,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC,CAAC,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YAEzE,IAAI,KAAI,CAAC,YAAY,EAAE;gBACrB,iBAAiB;gBACjB,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;gBAC9E,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;aAC/E;iBAAM;gBACL,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;gBACzE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;aAC1E;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,UAAU,EAAE;YAClC,IAAG,CAAC,KAAI,CAAC,YAAY,IAAI,KAAI,CAAC,QAAQ;gBAAE,OAAO;YAE/C,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,KAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC7D,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YACxE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;YAExE,KAAI,CAAC,YAAY,CAAC;gBAChB,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;gBAC9E,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;YAChF,CAAC,EAAE,CAAC,CAAC,CAAC;YAEN,KAAI,CAAC,YAAY,CAAC;gBAChB,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;gBACzE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;YAC3E,CAAC,EAAE,CAAC,CAAC,CAAC;YAEN,KAAI,CAAC,YAAY,CAAC;gBAChB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,IAAI;oBACxB,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;gBAC9D,CAAC,CAAC,CAAC;YACL,CAAC,EAAE,GAAG,CAAC,CAAA;QACT,CAAC,CAAC,CAAC;IAEL,CAAC;IAjGD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0CACG;IAErB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACc;IAIhC;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;iDACQ;IAE5B;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;8CACK;IAEzB;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;gDACO;IAbR,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAqG5B;IAAD,eAAC;CArGD,AAqGC,CArGqC,EAAE,CAAC,SAAS,GAqGjD;kBArGoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GamePlay extends cc.Component {\r\n  // node\r\n  @property(cc.Node)\r\n  game: cc.Node = null;\r\n  @property(cc.Node)\r\n  secondStickArea: cc.Node = null;\r\n\r\n  // array\r\n  @property([cc.Node])\r\n  yellowBirds: cc.Node[] = [];\r\n  @property([cc.Node])\r\n  redBirds: cc.Node[] = [];\r\n  @property([cc.Node])\r\n  greenBirds: cc.Node[] = [];\r\n\r\n  // state\r\n  isSorted: boolean = false;\r\n  isRotate: boolean = false;\r\n  clickedState: boolean = false;\r\n  firstStickState: number[] = [2, 2, 1, 1];\r\n  secondStickState: number[] = [1, 1];\r\n  sortProgressState: boolean[] = [false, false, true, true];\r\n\r\n  // sounds\r\n  protected onLoad(): void {\r\n    // set intro fly kind for birds \r\n    this.game.getComponent(cc.Animation).play(\"Mobile_IntroAnim\");\r\n    this.handleSetIntroForBirds();\r\n\r\n    this.scheduleOnce(() => {\r\n      this.registerEvent();\r\n    }, 2.5)\r\n  }\r\n\r\n  private handleSetIntroForBirds(): void {\r\n\r\n    this.redBirds.forEach(bird => {\r\n      bird.getComponent(sp.Skeleton).setAnimation(0, \"fly\", true);\r\n\r\n      this.scheduleOnce(() => {\r\n        bird.getComponent(sp.Skeleton).setAnimation(0, \"grounding\", false);\r\n      }, 1.2);\r\n\r\n      this.scheduleOnce(() => {\r\n        bird.getComponent(sp.Skeleton).setAnimation(0, \"idle\", true);\r\n      }, 2.5)\r\n    });\r\n\r\n    this.yellowBirds.forEach(bird => {\r\n      bird.getComponent(sp.Skeleton).setAnimation(0, \"fly\", true);\r\n\r\n      this.scheduleOnce(() => {\r\n        bird.getComponent(sp.Skeleton).setAnimation(0, \"grounding\", false);\r\n      }, 1.2);\r\n\r\n      this.scheduleOnce(() => {\r\n        bird.getComponent(sp.Skeleton).setAnimation(0, \"idle\", true);\r\n      }, 2.5)\r\n    });\r\n  }\r\n\r\n  private registerEvent(): void {\r\n    this.redBirds[0].on(\"touchend\", () => {\r\n      this.clickedState ? this.clickedState = false : this.clickedState = true;\r\n\r\n      if (this.clickedState) {\r\n        // touching sound\r\n        this.redBirds[0].getComponent(sp.Skeleton).setAnimation(0, \"touching\", false);\r\n        this.redBirds[2].getComponent(sp.Skeleton).setAnimation(0, \"touching\", false);\r\n      } else {\r\n        this.redBirds[0].getComponent(sp.Skeleton).setAnimation(0, \"idle\", true);\r\n        this.redBirds[2].getComponent(sp.Skeleton).setAnimation(0, \"idle\", true);\r\n      }\r\n    });\r\n\r\n    this.secondStickArea.on(\"touchend\", () => {\r\n      if(!this.clickedState || this.isSorted) return;\r\n\r\n      this.isSorted = true;\r\n      this.game.getComponent(cc.Animation).play(\"Mobile_SortAnim\");\r\n      this.redBirds[0].getComponent(sp.Skeleton).setAnimation(0, \"fly\", true);\r\n      this.redBirds[2].getComponent(sp.Skeleton).setAnimation(0, \"fly\", true);\r\n\r\n      this.scheduleOnce(() => {\r\n        this.redBirds[0].getComponent(sp.Skeleton).setAnimation(0, \"grounding\", true);\r\n        this.redBirds[2].getComponent(sp.Skeleton).setAnimation(0, \"grounding\", true);\r\n      }, 1);\r\n\r\n      this.scheduleOnce(() => {\r\n        this.redBirds[0].getComponent(sp.Skeleton).setAnimation(0, \"idle\", true);\r\n        this.redBirds[2].getComponent(sp.Skeleton).setAnimation(0, \"idle\", true);\r\n      }, 2);\r\n\r\n      this.scheduleOnce(() => {\r\n        this.redBirds.forEach(bird => {\r\n          bird.getComponent(sp.Skeleton).setAnimation(0, \"fly\", true);\r\n        });\r\n      }, 2.5)\r\n    });\r\n\r\n  }\r\n}\r\n"]}